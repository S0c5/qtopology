<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="542px" preserveAspectRatio="none" style="width:510px;height:542px;" version="1.1" viewBox="0 0 510 542" width="510px" zoomAndPan="magnify"><defs><filter height="300%" id="f7flfzy7sye0l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="432.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="35" y="49.6094"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="57.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="172" y="71.9609"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="57.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="172" y="263.7188"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="57.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="172" y="425.125"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="235.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="414" y="159.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="40" x2="40" y1="39.6094" y2="500.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="177" x2="177" y1="39.6094" y2="500.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="418.5" x2="418.5" y1="39.6094" y2="500.4766"/><rect fill="#FEFECE" filter="url(#f7flfzy7sye0l)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="15" y="24.5332">Worker</text><rect fill="#FEFECE" filter="url(#f7flfzy7sye0l)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="8" y="499.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="15" y="521.0098">Worker</text><rect fill="#FEFECE" filter="url(#f7flfzy7sye0l)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="143" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="150" y="24.5332">Storage</text><rect fill="#FEFECE" filter="url(#f7flfzy7sye0l)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="143" y="499.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="150" y="521.0098">Storage</text><rect fill="#FEFECE" filter="url(#f7flfzy7sye0l)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="363.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="370.5" y="24.5332">LocalTopology</text><rect fill="#FEFECE" filter="url(#f7flfzy7sye0l)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="363.5" y="499.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="370.5" y="521.0098">LocalTopology</text><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="432.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="35" y="49.6094"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="57.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="172" y="71.9609"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="57.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="172" y="263.7188"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="57.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="172" y="425.125"/><rect fill="#FFFFFF" filter="url(#f7flfzy7sye0l)" height="235.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="414" y="159.6641"/><polygon fill="#A80036" points="160,67.9609,170,71.9609,160,75.9609,164,71.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45" x2="166" y1="71.9609" y2="71.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="52" y="67.1045">getMessages</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="182" x2="224" y1="102.3125" y2="102.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224" x2="224" y1="102.3125" y2="115.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="224" y1="115.3125" y2="115.3125"/><polygon fill="#A80036" points="193,111.3125,183,115.3125,193,119.3125,189,115.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="189" y="97.4561">retrieve list of message for this worker</text><polygon fill="#A80036" points="56,125.3125,46,129.3125,56,133.3125,52,129.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="50" x2="176" y1="129.3125" y2="129.3125"/><polygon fill="#A80036" points="402,155.6641,412,159.6641,402,163.6641,406,159.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45" x2="408" y1="159.6641" y2="159.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="52" y="154.8076">start</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="424" x2="466" y1="190.0156" y2="190.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="466" y1="190.0156" y2="203.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="466" y1="203.0156" y2="203.0156"/><polygon fill="#A80036" points="435,199.0156,425,203.0156,435,207.0156,431,203.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="431" y="185.1592">run</text><polygon fill="#A80036" points="56,229.3672,46,233.3672,56,237.3672,52,233.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="50" x2="413" y1="233.3672" y2="233.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="62" y="228.5107">success</text><polygon fill="#A80036" points="160,259.7188,170,263.7188,160,267.7188,164,263.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45" x2="166" y1="263.7188" y2="263.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="52" y="258.8623">setTopologyStatus</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="182" x2="224" y1="294.0703" y2="294.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224" x2="224" y1="294.0703" y2="307.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="224" y1="307.0703" y2="307.0703"/><polygon fill="#A80036" points="193,303.0703,183,307.0703,193,311.0703,189,307.0703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="189" y="289.2139">mark topology as running</text><polygon fill="#A80036" points="56,317.0703,46,321.0703,56,325.0703,52,321.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="50" x2="176" y1="321.0703" y2="321.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="424" x2="466" y1="351.4219" y2="351.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="466" y1="351.4219" y2="364.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="466" y1="364.4219" y2="364.4219"/><polygon fill="#A80036" points="435,360.4219,425,364.4219,435,368.4219,431,364.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="431" y="346.5654">loop spouts</text><polygon fill="#A80036" points="56,390.7734,46,394.7734,56,398.7734,52,394.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50" x2="418" y1="394.7734" y2="394.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="62" y="389.917">exit/error</text><polygon fill="#A80036" points="160,421.125,170,425.125,160,429.125,164,425.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45" x2="166" y1="425.125" y2="425.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="52" y="420.2686">setTopologyStatus</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="182" x2="224" y1="455.4766" y2="455.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224" x2="224" y1="455.4766" y2="468.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="224" y1="468.4766" y2="468.4766"/><polygon fill="#A80036" points="193,464.4766,183,468.4766,193,472.4766,189,468.4766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="189" y="450.6201">mark topology as stopped/error</text><polygon fill="#A80036" points="51,478.4766,41,482.4766,51,486.4766,47,482.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="45" x2="176" y1="482.4766" y2="482.4766"/><!--
@startuml
activate Worker
Worker -> Storage: getMessages
activate Storage

Storage -> Storage: retrieve list of message for this worker
Storage - -> Worker:
deactivate Storage

Worker->LocalTopology: start
activate LocalTopology
LocalTopology->LocalTopology: run
LocalTopology- ->Worker: success

Worker -> Storage: setTopologyStatus
activate Storage
Storage -> Storage: mark topology as running
Storage - -> Worker:
deactivate Storage

LocalTopology->LocalTopology: loop spouts

LocalTopology->Worker: exit/error
deactivate LocalTopology

Worker -> Storage: setTopologyStatus
activate Storage
Storage -> Storage: mark topology as stopped/error
Storage - -> Worker:
deactivate Storage

deactivate Worker
@enduml

PlantUML version 1.2018.14(Fri Dec 21 17:33:16 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>