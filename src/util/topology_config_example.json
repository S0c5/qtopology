{
    "general": {
        "name": "events",
        "heartbeat": 3000,
        "initialization": [
            {
                "working_dir": "${CODE_DIR}",
                "cmd": "topology_init_and_shutdown.js",
                "init": {
                    "main_config": "${CONFIG_DIR}/main_config_dev.json"
                }
            }
        ],
        "shutdown": [
            {
                "working_dir": "${CODE_DIR}",
                "cmd": "topology_init_and_shutdown.js"
            }
        ]
    },
    "spouts": [
        {
            "name": "pumpdsa_gdr",
            "type": "inproc",
            "working_dir": "${CODE_DIR}",
            "cmd": "spout_dsa_gdr.js",
            "init": {
                "data_source": "events"
            }
        }
    ],
    "bolts": [
        {
            "name": "bolt_enricher",
            "type": "inproc",
            "working_dir": "${CODE_DIR}",
            "cmd": "bolt_enricher.js",
            "inputs": [
                { "source": "pumpdsa_gdr" }
            ],
            "init": {
                "preserve_stream_id": true
            }
        },
        {
            "name": "bolt_pipeline",
            "type": "inproc",
            "working_dir": "${CODE_DIR}",
            "cmd": "bolt_pipeline_wrapper.js",
            "inputs": [
                { "source": "bolt_enricher" }
            ],
            "init": {
                "pipeline_config": "${PIPELINES_DIR}/events_pipeline_set.json"
            }
        },
        {
            "name": "bolt_console",
            "type": "sys",
            "working_dir": ".",
            "cmd": "console",
            "inputs": [
                { "source": "bolt_pipeline", "stream_id": "alert" },
                { "source": "bolt_pipeline", "stream_id": "gdr" },
                { "source": "bolt_pipeline", "stream_id": "gts" },
                { "source": "bolt_pipeline", "stream_id": "gsts" },
                { "source": "bolt_pipeline", "stream_id": "complex_db" }
            ],
            "init": {}
        }
    ],
    "variables": {
        "CODE_DIR": "./lib/topology",
        "CONFIG_DIR": "../../configs",
        "PIPELINES_DIR": "../../configs/pipelines"
    }
}
